erDiagram
    Person {
      string person_id
      string namn
      string persontyp
    }

    Personroll {
      string personroll_id
      string namn
    }

    Rolltilldelning {
      string rolltilldelning_id
      date giltig_from
      date giltig_tom
    }

    Filtyp {
      string filtyp_id
      string namn
    }

    Regelverk {
      string regelverk_id
      string namn
      string version
    }

    Fil {
      string fil_id
      string namn
      string uri
      date uppladdad_datum
    }

    Dokumentdel {
      string dokumentdel_id
      string typ
      int ordning
    }

    Annoteringsjobb {
      string jobb_id
      datetime skapad_tid
      string prioritet
    }

    Texttyp {
      string texttyp_id
      string namn
    }

    Annoteringsenhet {
      string enhet_id
      string källreferens
      string innehåll_hash
    }

    Klass {
      string klass_id
      string namn
      string beskrivning
    }

    Status {
      string status_id
      string namn
    }

    Annotering {
      string annotering_id
      datetime skapad_tid
      string kommentar
    }

    %% Person ↔ Personroll via Rolltilldelning
    Person ||--o{ Rolltilldelning : "har"
    Personroll ||--o{ Rolltilldelning : "gäller"

    %% Fil kopplingar
    Fil ||--|| Filtyp : "är_av_typ"
    Fil }o--o{ Regelverk : "omfattas_av"
    Fil ||--|{ Dokumentdel : "delas_i"

    %% Dokumentdel → jobb/enheter
    Dokumentdel ||--|| Annoteringsjobb : "har"
    Dokumentdel ||--|{ Annoteringsenhet : "innehåller"

    %% Annoteringsenhet → Texttyp
    Texttyp ||--o{ Annoteringsenhet : "typ_av"

    %% Annoteringsjobb → tilldelad annotatör (person)
    Person ||--o{ Annoteringsjobb : "tilldelad_annotatör"

    %% Annoteringar inom jobb och på enheter
    Annoteringsjobb ||--o{ Annotering : "innehåller"
    Annoteringsenhet ||--o{ Annotering : "annoteras_med"
    Klass ||--o{ Annotering : "används_i"
    Status ||--o{ Annotering : "har"

    %% (Valfria associationslinjer för rollspecifika aktiviteter)
    Personroll }o--o{ Fil : "bestämmer/delar_upp/laddar_upp"
    Personroll }o--o{ Klass : "definierar/underhåller"
